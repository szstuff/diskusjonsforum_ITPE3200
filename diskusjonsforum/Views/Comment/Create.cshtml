@model CommentCreateViewModel

<!DOCTYPE html>

<html>
    <head>
        <!-- External css files for styling -->
        <link rel="stylesheet" href="~/css/site.css">
        <link rel="stylesheet" href="~/css/crud.css">
        @* <link rel="stylesheet" href="~/css/thread_view.css"> *@
        <!-- External fonts and icons -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="~/css/authentication.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Zanabazar+Square&family=Roboto&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    </head> 

    <body>

    <div class="container mt-5">
        <div class="row mt-4 col-12 mb-4 p-4 d-flex justify-content-center align-items-stretch flex-fill crud-thread">
            <div class="row mt-4 col-12 mb-4 p-4 crud-container">
                <div class="container crud-comment-info">
                    <h1> You're replying to: </h1>

                    @* <p> Thread: @(Model.Thread != null ? Model.Thread.ThreadTitle : "Thread not found")</p> *@
                    @* <p> Thread: @Model.ParentComment?.Thread?.ThreadTitle</p> *@
                    <p>
                        Posted by <b>@Model.ParentComment?.User</b> on @Model.ParentComment?.CommentCreatedAt
                        @if (@Model.ParentComment?.CommentCreatedAt != @Model.ParentComment?.CommentLastEditedAt)
                    {
                        <b> Last edited: @Model.ParentComment?.CommentLastEditedAt</b>
                    }
                    </p>
                    <p> Comment: @Model.ParentComment?.CommentBody </p>
                </div>
            </div>


            <div class="form">
                <h2 class="crud-title"> Create a reply </h2>
                @using (Html.BeginForm("Save", "Comment", FormMethod.Post))

                {
                    <form asp-controller="Comment" asp-action="Create">
                        <input type="hidden" asp-for="Comment.ThreadId" value="@Model.Thread.ThreadId" />
                        <input type="hidden" asp-for="Comment.ParentCommentId" value="@Model.ParentComment?.CommentId" />

                        <div class="form-group">
                            <label asp-for="Comment.CommentBody">Write your reply here</label><span class="text-danger"></span>
                            <input asp-for="Comment.CommentBody" class="form-control" />
                            <span asp-validation-for="Comment.CommentBody" class="text-danger"></span>
                        </div>
                        @*<div class="form-group">
                    <label asp-for="ThreadId"></label><span class="text-danger"></span>
                    <input asp-for="ThreadId" class="form-control"/>
                    <span asp-validation-for="ThreadId" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                    <label asp-for="ParentCommentId"></label><span class="text-danger"></span>
                    <input asp-for="ParentCommentId" class="form-control"/>
                    <span asp-validation-for="ParentCommentId" class="text-danger"></span>
                    </div>*@
                        <div class="form-group">
                            <label asp-for="Comment.UserId">Username</label><span class="text-danger"></span>
                            <input asp-for="Comment.UserId" class="form-control" />
                            <span asp-validation-for="Comment.UserId" class="text-danger"></span>
                        </div>

                        <div class="d-flex justify-content-between">
                            <input type="submit" value="Post reply" class="btn btn-primary crud-button-primary" onclick="location.href='@Url.Action("Save", "Comment")'" />
                            <a asp-controller="Thread" asp-action="Thread" asp-route-threadId="@Model.ThreadId" class="btn btn-secondary crud-button-secondary"> Return </a>
                        </div>

                    </form>
                }
            </div>
        </div>
    </div>
    </body>
</html>