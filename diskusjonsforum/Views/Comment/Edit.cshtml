@model CommentCreateViewModel

<div class="container mt-5">
    <div class="row mt-4 col-12 mb-4 p-4 d-flex justify-content-center align-items-stretch flex-fill crud-thread">
        @* <div class="container crud-comment-info">
            <h1>Editing reply for: </h1>
            <h1>Thread ID: @Model.Thread.ThreadId</h1>
            <h1>Comment ID: @Model.ParentComment?.CommentBody</h1>
            <p> Thread: @(Model.Thread != null ? Model.Thread.ThreadTitle : "Thread not found")</p>
            <p> Thread: @Model.ParentComment?.Thread?.ThreadTitle</p>
            <p> Comment: @Model.ParentComment?.CommentBody </p>
        </div> *@
        <div class="row mt-4 col-12 mb-4 p-4 crud-container">
            <div class="container crud-comment-info">
                <h1> You're editing your comment: </h1>

                @* <p> Thread: @(Model.Thread != null ? Model.Thread.ThreadTitle : "Thread not found")</p> *@
                @* <p> Thread: @Model.ParentComment?.Thread?.ThreadTitle</p> *@
                <p>
                    Posted by <b>You</b> on @Model.ParentComment?.CommentCreatedAt
                    @if (@Model.ParentComment?.CommentCreatedAt != @Model.ParentComment?.CommentLastEditedAt)
                    {
                        <b> Last edited: @Model.ParentComment?.CommentLastEditedAt</b>
                    }
                </p>
                <p> Comment: @Model.ParentComment?.CommentBody </p>
            </div>
        </div>


        <h2 class="crud-title"> Edit your reply </h2>

        <div class="form">
            @using (Html.BeginForm("SaveEdit", "Comment", FormMethod.Post))

            {
                <form asp-controller="Comment" asp-action="Create">
                    <input type="hidden" asp-for="Comment.ThreadId" value="@Model.Thread.ThreadId" />
                    <input type="hidden" asp-for="Comment.ParentCommentId" value="@Model.CommentToEdit.ParentCommentId" />
                    <input type="hidden" asp-for="Comment.CommentId" value="@Model.CommentToEdit.CommentId" />
                    <input type="hidden" asp-for="Comment.CommentCreatedAt" value="@Model.CommentToEdit.CommentCreatedAt" />

                    <div class="form-group">
                        <label asp-for="Comment.CommentBody">New, edited comment:</label><span class="text-danger"></span>
                        <input asp-for="Comment.CommentBody" class="form-control" value="@Model.CommentToEdit.CommentBody" />
                        <span asp-validation-for="Comment.CommentBody" class="text-danger"></span>
                    </div>
                    @*<div class="form-group">
                        <label asp-for="ThreadId"></label><span class="text-danger"></span>
                        <input asp-for="ThreadId" class="form-control"/>
                        <span asp-validation-for="ThreadId" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="ParentCommentId"></label><span class="text-danger"></span>
                        <input asp-for="ParentCommentId" class="form-control"/>
                        <span asp-validation-for="ParentCommentId" class="text-danger"></span>
                    </div>*@
                    <div class="form-group">
                        <label asp-for="Comment.UserId">Username</label><span class="text-danger"></span>
                        <input asp-for="Comment.UserId" class="form-control" value="@Model.CommentToEdit.UserId" />
                        <span asp-validation-for="Comment.UserId" class="text-danger"></span>
                    </div>

                    <div class="d-flex justify-content-between">
                        <input type="submit" value="Post reply" class="btn btn-primary crud-button-primary" onclick="location.href='@Url.Action("SaveEdit", "Comment")'" />
                        <a asp-controller="Thread" asp-action="Thread" asp-route-threadId="@Model.ThreadId" class="btn btn-secondary crud-button-secondary"> Return </a>
                    </div>
                           
            </form>
            }
        </div>
    </div>
</div>
